{% extends layout_path %}

{% load static %}
{% load i18n %}

{% block title %}Academy - My Courses - App{% endblock %}

{% block vendor_css %}
{{ block.super }}
<link rel="stylesheet" href="{% static 'vendor/libs/select2/select2.css' %}"/>
<link rel="stylesheet" href="{% static 'vendor/libs/plyr/plyr.css' %}"/>
{% endblock vendor_css %}

{% block vendor_js %}
{{ block.super }}
<script src="{% static 'vendor/libs/select2/select2.js' %}"></script>
<script src="{% static 'vendor/libs/plyr/plyr.js' %}"></script>
{% endblock vendor_js %}

{% block page_css %}
{{ block.super }}
<link rel="stylesheet" href="{% static 'vendor/css/pages/app-academy.css' %}"/>
{% endblock page_css %}

{% block page_js %}
{{ block.super }}
<script src="{% static 'js/app-academy-course.js' %}"></script>
{% endblock page_js %}

{% block content %}
<div class="app-academy">

    <div class="card mb-6">
        <div class="card-header d-flex flex-wrap justify-content-between gap-4">
            <div class="card-title mb-0 me-1">
                <h5 class="mb-0">Movies</h5>
            </div>
        </div>
        <div class="card-body mt-1">
            <div class="row gy-6 mb-6">
                {% for movie in movies %}
                <div class="col-sm-6 col-lg-4">
                    <div class="card shadow-none border p-2 h-100">
                        <div class="rounded-2 text-center mb-3">
                            <img class="img-fluid"
                                 src="{{ movie.poster_url|default:'/static/img/static_movie_poster.jpg' }}"
                                 alt="{{ movie.title }}">
                        </div>
                        <div class="card-body p-4 pt-2">
                            <div class="d-flex justify-content-between align-items-center mb-4 pe-xl-4 pe-xxl-0">
                                <span class="badge rounded-pill bg-label-danger">{{ movie.genre }}</span>
                                <p class="d-flex align-items-center justify-content-center fw-medium gap-1 mb-0">
                                    Rating: {{ movie.rating|default:"N/A" }}
                                </p>
                            </div>
                            <p class="h5">{{ movie.title }}</p>
                            <p class="mt-1">{{ movie.description|truncatechars:100 }}</p>
                            <p class="d-flex align-items-center mb-4"><i class="ri-time-line ri-20px me-1"></i>{{ movie.duration }} min</p>
                            <div class="d-flex flex-column flex-md-row gap-4 text-nowrap flex-wrap flex-md-nowrap  flex-lg-wrap flex-xxl-nowrap">
                                <a class="w-100 btn btn-outline-primary d-flex align-items-center"
                                   href="{% url 'book-movie' movie.id %}">
                                    <span class="me-1_5">Book Now</span><i
                                        class="ri-arrow-right-line ri-16px lh-1 scaleX-n1-rtl"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>

</div>
{% endblock %}
